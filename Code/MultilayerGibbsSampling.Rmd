---
title: "Algorithm for Simultaneous Missing Data Imputation and Community Detection"
output: pdf_document
date: "2024-01-24"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Type of missing data

Assumption: Missing at random. Lends itself to imputation problems

Handling continuous data for now.

## Multi layer Gibbs sampling

Outer posterior: Missing data handling

Inner posterior: Community detection

Simplifying assumptions: 

1. Single community : Only the inner layer is utilized
2. No missing data : Only the outer layer is utilized

Identify the distribution of missing data

Criterion for convergence of the Gibbs sampler.

Probability based community assignment

Distributions of communities.

Gives an idea of community assignment in relation to the missing data.

Probability and missing data values can give a reason for difficulty to place nodes. Gives a confidence for different possible imputed values of the missing data and the difficulty to place the nodes.

##### Steps to take:

* Start with known communities and full data.Different ways to generate data. Is there correlation between communities and the data/missing data.
    - Come up with a different ways the data can be missing. Related to the community assignment 
* Multiple layer Gibbs sampler

TODO:

1. Understanding how multilayer Gibbs sampling works.

2. Create inner and outer layer based on ERGM model or Community detection. Two possible types of communities.
  a. Communities are a categorical variable. Each node belongs to one community
  b. Probability based communities. Can relate this to missing data. Give a confidence of community assignment based on different possible values of imputed data.
  
3. Two possibilities Likelihood based methods or Data imputation.
  
  
## Understadning method used by thesis* for missing data imputation.

a: Relies on combining FCS framework and network model.

b: Not many models available for imputing missing data in networks. Especially using ERGM model.

## MultiLayer Gibbs sampling:

1. Gibbs sampling for missing data:
  a. Sample from Conditional distribution instead of joint distribution.
  

2. Adding a layer to Gibbs sampling for ERGM model.



### Starter code for multilevel imputation.

Tracking:

1. Missing data

2. Communities

  a. ARI compared to priginal
  
  b. ARI compared to previous iteration.



```{r}

niter= 100

# network simulation with 3 groups 100 nodes and ** connectivity. Two co-variates with continuous data.


## Network with one categorical Variables

### Categorical variable correlated to the assigned clusters and same number of levels.
### Categorical variable correlated to the assigned clusters and different number of levels.(binary variable where one is correlated to two clusters and 2nd is correlated to the last cluster.)

### Categorical variables not correlated to the assigned clusters and same number of levels.
### Categorical variables not correlated to the assigned clusters and different number of levels.(binary levels with no correlation.)

## Network with one continuous Variable

### Continuous variable correlated to the assigned clusters and different distributions for each cluster.
### Continuous variable correlated to the assigned clusters and same distribution for all clusters.

# create missingness in simulated networks.
## Missingness created randomly.

# Impute missing values in NW using mean imputation. 

# Use spectral CD algorithm to find the initial communities.


## Loop
## Missingness based on mean imputation based on assigned communities.
## Update communities based on Spectral clustering with covariates algorithm.

```

















