---
title: "SafeGraph"
format: html
editor: visual
---

## Quarto

Quarto enables you to weave together content and executable code into a finished document. To learn more about Quarto see <https://quarto.org>.

## Running Code

When you click the **Render** button a document will be generated that includes both content and the output of embedded code. You can embed code like this:

```{r}
library(reticulate)
#miniconda_uninstall()
#install_miniconda(path = miniconda_path() , update = T)
#conda_list(conda = "e:/miniconda/_conda.exe")
#use_condaenv(condaenv = "r-reticulate", conda = "e:/miniconda/_conda.exe")
#py_install(packages = c("pandas", "scikit-learn"))

```

```{python}

import pandas as pd
import numpy as np

n = 10000
file  = "//depot.engr.oregonstate.edu/mime_u1/agor/Safe Graph Data/Weekly Patterns/2020_Weekly_Patterns/2020-01-06-weekly-patterns.csv.gz"

df_chunks = []

for df in pd.read_csv(file, chunksize = n, iterator = True, compression='gzip'):
  df_f  = df.loc[df['region'] == "OR"]
  df_chunks.append(df_f)

master_df = pd.concat(df_chunks)

master_df.columns

master_df = master_df[['city','region','postal_code','date_range_start', 'date_range_end','raw_visit_counts','raw_visitor_counts','visits_by_day', 'visits_by_each_hour', 'poi_cbg', 'visitor_home_cbgs', 'visitor_daytime_cbgs', 'visitor_country_of_origin', 'distance_from_home', 'median_dwell']]

master_df['dateStart'] = pd.to_datetime(master_df['date_range_start'], format='%Y%m%d%H%M%S')

print(master_df.dtypes)
```

``` {.R myenvs="conda_list()"}
```

```{r}

```

```{python}

```
